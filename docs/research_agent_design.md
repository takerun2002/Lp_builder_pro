# LP Builder Pro - 革命的リサーチエージェント設計書

## 🎯 ビジョン

**「案件のジャンル・演者の雰囲気・トンマナを入力するだけで、最適なLP構成・デザイン・コピーを提案してくれるAIリサーチエージェント」**

---

## 📊 機能要件

### 1. コンテキスト認識リサーチ
- 案件ジャンル（美容、健康、教育、ビジネス等）
- 演者/モデルの雰囲気（フォーマル、カジュアル、専門家、親しみやすい等）
- 既存のトンマナ（カラー、フォント、雰囲気）
- ターゲット層（年齢、性別、職業、悩み等）

### 2. 地域・言語フィルタリング
- 日本市場特化検索
- 海外（US/EU/アジア）トレンド検索
- 言語別フィルタリング

### 3. マルチソースリサーチ
- **Infotop**: 売れてるLPランキング分析
- **ClickBank**: 海外アフィリエイト市場
- **競合LP**: 同業他社の構成分析
- **SNS**: トレンド・反応分析
- **広告ライブラリ**: Meta/Google広告クリエイティブ

### 4. 構成・コピー分析
- セールスレター構成パターン抽出
- ヘッドライン・サブヘッドパターン
- CTAボタン文言・配置
- 証拠・社会的証明の使い方
- FAQパターン

---

## 🏗️ システムアーキテクチャ

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           LP Builder Pro Frontend                            │
│                     (Next.js + React + Tailwind CSS)                         │
└──────────────────────────────┬──────────────────────────────────────────────┘
                               │
┌──────────────────────────────▼──────────────────────────────────────────────┐
│                        Research Agent Orchestrator                           │
│                          (Next.js API Routes)                                │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                      Context Analyzer                                │   │
│  │  - ジャンル分類    - トンマナ抽出    - ターゲット推定               │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
└──────────────────────────────┬──────────────────────────────────────────────┘
                               │
        ┌──────────────────────┼──────────────────────┐
        │                      │                      │
        ▼                      ▼                      ▼
┌───────────────┐    ┌─────────────────┐    ┌────────────────┐
│  高速スクレイパー  │    │  Deep Research   │    │  専門データソース  │
│   (Firecrawl)   │    │ (Gemini API)    │    │   (Custom)      │
│                 │    │                 │    │                 │
│ - LP構成抽出    │    │ - トレンド分析  │    │ - Infotopランキング│
│ - スクショ取得  │    │ - 競合調査      │    │ - 広告ライブラリ  │
│ - テキスト抽出  │    │ - 市場調査      │    │ - SNSトレンド    │
└───────────────┘    └─────────────────┘    └────────────────┘
        │                      │                      │
        └──────────────────────┼──────────────────────┘
                               │
┌──────────────────────────────▼──────────────────────────────────────────────┐
│                         Result Synthesizer                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  - 結果統合  - ランキング  - 類似度スコア  - 推奨理由生成         │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
└──────────────────────────────┬──────────────────────────────────────────────┘
                               │
┌──────────────────────────────▼──────────────────────────────────────────────┐
│                          提案生成エンジン                                    │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │
│  │ LP構成提案  │  │ コピー提案  │  │ デザイン提案 │  │ 参考LP一覧  │       │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘       │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 📝 詳細ワークフロー

### Phase 1: コンテキスト入力 & 分析

```yaml
入力フォーム:
  基本情報:
    - 案件名: string
    - ジャンル: select [美容, 健康, 教育, ビジネス, 投資, 恋愛, スピリチュアル, その他]
    - サブジャンル: string (自由入力)
    
  ターゲット:
    - 年齢層: multi-select [20代, 30代, 40代, 50代, 60代以上]
    - 性別: select [男性, 女性, 両方]
    - 悩み/課題: textarea
    - 理想の状態: textarea
    
  トンマナ:
    - 雰囲気: multi-select [高級感, カジュアル, 信頼感, 親しみ, 専門的, エモーショナル]
    - カラーイメージ: color-picker or preset
    - 参考LP URL: array[url] (あれば)
    
  演者/モデル:
    - タイプ: select [専門家, インフルエンサー, 一般人, キャラクター, なし]
    - 雰囲気: multi-select [知的, 親しみやすい, エネルギッシュ, 落ち着き, セクシー]
    - 参考画像: file (あれば)
    
  検索設定:
    - 地域: multi-select [日本, アメリカ, ヨーロッパ, アジア]
    - 期間: select [最新1ヶ月, 3ヶ月, 6ヶ月, 1年, 全期間]
    - ソース: multi-select [Infotop, 競合LP, 広告, SNS, 海外]
```

### Phase 2: マルチソース並列リサーチ

```python
async def research_workflow(context: ResearchContext):
    """メインリサーチワークフロー"""
    
    # 並列でリサーチを実行
    results = await asyncio.gather(
        # 1. Infotopランキング分析
        research_infotop(context.genre, context.period),
        
        # 2. 競合LP分析（Firecrawl）
        scrape_competitor_lps(context.genre, context.region),
        
        # 3. Deep Research（Gemini）
        deep_research_trends(context),
        
        # 4. 広告クリエイティブ分析
        analyze_ad_creatives(context.genre, context.target),
        
        # 5. SNSトレンド分析
        analyze_sns_trends(context.genre),
        
        return_exceptions=True
    )
    
    # 結果を統合
    synthesized = await synthesize_results(results, context)
    
    # 提案生成
    proposals = await generate_proposals(synthesized, context)
    
    return proposals
```

### Phase 3: 専門データソース別ワークフロー

#### 3.1 Infotopランキング分析

```yaml
workflow: infotop_analysis
steps:
  1. ランキングページスクレイプ:
     - URL: "https://www.infotop.jp/uc/index/ranking"
     - 取得: 上位50商品
     - フィルタ: ジャンル一致
     
  2. 個別LP分析:
     - 各LP URLにアクセス
     - セクション構成抽出
     - ヘッドライン抽出
     - CTA分析
     
  3. パターン抽出:
     - 共通構成パターン
     - 高CVR要素の特定
     - 価格帯・特典パターン
     
output:
  - ranking_data: 売上ランキング
  - lp_patterns: 構成パターン
  - successful_elements: 成功要素
```

#### 3.2 競合LP分析（Firecrawl）

```yaml
workflow: competitor_analysis
steps:
  1. 競合LP発見:
     - Google検索: "{ジャンル} LP"
     - 広告出稿LP収集
     - 類似サービス検索
     
  2. LP詳細分析:
     - フルページスクリーンショット
     - セクション自動検出
     - OCRテキスト抽出
     - カラー・フォント分析
     
  3. 構成パターン分類:
     - ヒーロー → 課題 → 解決策 → 証拠 → CTA
     - ストーリー型
     - 比較型
     - Q&A型
     
output:
  - competitor_lps: 競合LP一覧
  - section_patterns: セクション構成パターン
  - copy_patterns: コピーパターン
  - design_elements: デザイン要素
```

#### 3.3 Gemini Deep Research

```yaml
workflow: deep_research
steps:
  1. トレンド調査:
     prompt: |
       以下の条件でLP・セールスレターのトレンドを調査してください：
       - ジャンル: {genre}
       - ターゲット: {target}
       - 地域: {region}
       
       調査項目：
       1. 現在のデザイントレンド
       2. 効果的なコピーパターン
       3. 高CVRのLP構成
       4. 避けるべき要素
       5. 新しいテクニック
       
  2. 市場調査:
     prompt: |
       {genre}市場について深く調査してください：
       - 市場規模と成長率
       - 主要プレイヤー
       - ターゲットの悩み・欲求
       - 競合との差別化ポイント
       
  3. 心理学的分析:
     prompt: |
       {target}に効果的な心理トリガーを分析してください：
       - 購買心理パターン
       - 信頼構築要素
       - 緊急性・希少性の使い方
       - 社会的証明の効果的な使い方
       
output:
  - trend_report: トレンドレポート
  - market_analysis: 市場分析
  - psychology_insights: 心理学的インサイト
```

### Phase 4: 結果統合 & 提案生成

```yaml
synthesis:
  1. 類似度スコアリング:
     - 入力コンテキストとの一致度
     - 成功実績スコア
     - トレンド適合度
     
  2. パターンランキング:
     - LP構成パターン TOP 5
     - ヘッドラインパターン TOP 10
     - CTAパターン TOP 5
     
  3. 推奨理由生成:
     - なぜこの構成が効果的か
     - ターゲットとの相性
     - 差別化ポイント

proposals:
  1. LP構成提案:
     - 推奨セクション順序
     - 各セクションの目的
     - 文字量目安
     
  2. コピー提案:
     - ヘッドライン候補 5案
     - サブヘッド候補
     - CTAボタン文言候補
     
  3. デザイン提案:
     - カラーパレット
     - フォント組み合わせ
     - レイアウトパターン
     
  4. 参考LP一覧:
     - スクリーンショット
     - 成功ポイント解説
     - 取り入れるべき要素
```

---

## 🖥️ UI/UX設計

### メインリサーチ画面

```
┌─────────────────────────────────────────────────────────────────────────┐
│ 🔍 リサーチエージェント                                    [設定] [履歴] │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │ 📋 案件情報                                                     │   │
│  │ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐   │   │
│  │ │ ジャンル        │ │ ターゲット      │ │ 雰囲気          │   │   │
│  │ │ [美容 ▼]       │ │ [30代女性]      │ │ [高級感,信頼]   │   │   │
│  │ └─────────────────┘ └─────────────────┘ └─────────────────┘   │   │
│  │                                                                 │   │
│  │ 📝 詳細指示（自由入力）                                        │   │
│  │ ┌───────────────────────────────────────────────────────────┐ │   │
│  │ │ 40代向け高級スキンケアLP。                                │ │   │
│  │ │ 皮膚科医監修で信頼性重視。                                │ │   │
│  │ │ 競合はオルビス、ファンケル。差別化したい。               │ │   │
│  │ └───────────────────────────────────────────────────────────┘ │   │
│  │                                                                 │   │
│  │ 🌍 検索設定                                                    │   │
│  │ ┌─────────────┐ ┌─────────────┐ ┌─────────────────────────┐ │   │
│  │ │ 地域        │ │ 期間        │ │ ソース                  │ │   │
│  │ │ [日本,US]   │ │ [6ヶ月]     │ │ [Infotop,競合,広告,SNS] │ │   │
│  │ └─────────────┘ └─────────────┘ └─────────────────────────┘ │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│                    [🚀 リサーチ開始]                                    │
│                                                                         │
├─────────────────────────────────────────────────────────────────────────┤
│ 📊 リサーチ進捗                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐│
│ │ ████████████████████░░░░░░░░░░ 68%                                  ││
│ │                                                                     ││
│ │ ✅ Infotopランキング分析 (2.3s)                                    ││
│ │ ✅ 競合LP収集 (5.1s)                                               ││
│ │ 🔄 Deep Research実行中... (推定残り45秒)                           ││
│ │ ⏳ 広告クリエイティブ分析                                          ││
│ │ ⏳ 結果統合 & 提案生成                                             ││
│ └─────────────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────────────┘
```

### リサーチ結果画面

```
┌─────────────────────────────────────────────────────────────────────────┐
│ 📊 リサーチ結果                              [エクスポート] [共有] [保存]│
├─────────────────────────────────────────────────────────────────────────┤
│ [📋 概要] [🏗️ 構成提案] [✍️ コピー提案] [🎨 デザイン] [📚 参考LP]       │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  🏆 推奨LP構成 (信頼スコア: 92%)                                       │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │ 1. ヒーローセクション                                           │   │
│  │    └─ 目的: 第一印象で信頼感を確立                              │   │
│  │    └─ 要素: 皮膚科医の写真、権威性バッジ、メインキャッチ        │   │
│  │                                                                 │   │
│  │ 2. 悩み共感セクション                                           │   │
│  │    └─ 目的: ターゲットの課題を言語化                            │   │
│  │    └─ パターン: Before/After + 共感コピー                       │   │
│  │                                                                 │   │
│  │ 3. 解決策提示                                                   │   │
│  │    └─ 目的: 商品の独自価値を伝える                              │   │
│  │    └─ パターン: 3つの特徴 + 科学的根拠                          │   │
│  │                                                                 │   │
│  │ ... (続き)                                                      │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
│  📚 参考LP (類似度順)                                                  │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐                     │
│  │ [thumb] │ │ [thumb] │ │ [thumb] │ │ [thumb] │                     │
│  │ 類似92% │ │ 類似88% │ │ 類似85% │ │ 類似82% │                     │
│  │ [詳細]  │ │ [詳細]  │ │ [詳細]  │ │ [詳細]  │                     │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘                     │
│                                                                         │
│  [🎨 この構成でLPを作成開始]                                           │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 🛠️ 技術実装計画

### バックエンド構成

```
src/
├── app/
│   └── api/
│       └── research/
│           ├── route.ts              # メインエンドポイント
│           ├── infotop/
│           │   └── route.ts          # Infotopスクレイパー
│           ├── competitor/
│           │   └── route.ts          # 競合LP分析
│           ├── deep-research/
│           │   └── route.ts          # Gemini Deep Research
│           ├── ads/
│           │   └── route.ts          # 広告分析
│           └── synthesize/
│               └── route.ts          # 結果統合
│
├── lib/
│   └── research/
│       ├── orchestrator.ts           # ワークフロー管理
│       ├── scrapers/
│       │   ├── infotop.ts            # Infotopスクレイパー
│       │   ├── competitor.ts         # 競合分析
│       │   └── ads.ts                # 広告分析
│       ├── analyzers/
│       │   ├── lp-structure.ts       # LP構成分析
│       │   ├── copy-patterns.ts      # コピーパターン
│       │   └── design-elements.ts    # デザイン要素
│       ├── gemini/
│       │   ├── deep-research.ts      # Deep Research
│       │   └── prompts.ts            # プロンプト管理
│       └── synthesizer/
│           ├── ranking.ts            # ランキング
│           └── proposals.ts          # 提案生成
│
└── components/
    └── research/
        ├── ResearchForm.tsx          # 入力フォーム
        ├── ResearchProgress.tsx      # 進捗表示
        ├── ResearchResults.tsx       # 結果表示
        ├── ProposalCards.tsx         # 提案カード
        └── ReferenceLPGallery.tsx    # 参考LP表示
```

### データベーススキーマ

```sql
-- リサーチセッション
CREATE TABLE research_sessions (
  id TEXT PRIMARY KEY,
  project_id TEXT REFERENCES projects(id),
  context JSONB NOT NULL,        -- 入力コンテキスト
  status TEXT DEFAULT 'pending', -- pending, running, completed, failed
  results JSONB,                 -- リサーチ結果
  proposals JSONB,               -- 提案データ
  created_at TIMESTAMP DEFAULT NOW(),
  completed_at TIMESTAMP
);

-- リサーチキャッシュ
CREATE TABLE research_cache (
  id TEXT PRIMARY KEY,
  cache_key TEXT UNIQUE NOT NULL,
  data JSONB NOT NULL,
  source TEXT NOT NULL,          -- infotop, competitor, deep_research, etc
  expires_at TIMESTAMP NOT NULL,
  created_at TIMESTAMP DEFAULT NOW()
);

-- 参考LP
CREATE TABLE reference_lps (
  id TEXT PRIMARY KEY,
  url TEXT NOT NULL,
  screenshot_path TEXT,
  structure JSONB,               -- セクション構成
  copy_elements JSONB,           -- コピー要素
  design_elements JSONB,         -- デザイン要素
  genre TEXT,
  score REAL,                    -- 成功スコア
  created_at TIMESTAMP DEFAULT NOW()
);
```

---

## 📅 実装フェーズ

### Phase 1: 基盤構築 (1週間)
- [ ] リサーチAPI基本構造
- [ ] Firecrawl統合
- [ ] Gemini Deep Research統合
- [ ] 基本的なUI

### Phase 2: データソース拡充 (1週間)
- [ ] Infotopスクレイパー
- [ ] 競合LP分析機能
- [ ] 広告クリエイティブ分析
- [ ] SNSトレンド分析

### Phase 3: 分析エンジン (1週間)
- [ ] LP構成パターン分析
- [ ] コピーパターン抽出
- [ ] デザイン要素分析
- [ ] 類似度スコアリング

### Phase 4: 提案生成 (1週間)
- [ ] 構成提案エンジン
- [ ] コピー提案エンジン
- [ ] デザイン提案連携
- [ ] 参考LP表示

### Phase 5: 統合 & 最適化 (1週間)
- [ ] LP Builder本体との統合
- [ ] キャッシング最適化
- [ ] パフォーマンスチューニング
- [ ] ドキュメント作成

---

## 💰 コスト見積もり

| 項目 | 単価 | 月間想定 | 月額 |
|------|------|----------|------|
| Gemini Deep Research | $0.50/レポート | 100回 | $50 |
| Firecrawl API | $0.01/スクレイプ | 1,000回 | $10 |
| インフラ（Vercel Pro） | - | - | $20 |
| **合計** | - | - | **$80/月** |

---

## 🔗 ClaudeCode との役割分担

### ClaudeCode 担当
1. **バックエンドAPI実装**
   - リサーチオーケストレーター
   - 各データソーススクレイパー
   - Gemini API統合
   - 結果統合ロジック

2. **データベース設計**
   - スキーマ設計
   - マイグレーション
   - キャッシング戦略

3. **フロントエンド実装**
   - リサーチフォーム
   - 進捗表示
   - 結果表示
   - LP Builder統合

### Manus/外部リサーチ 担当
1. **プロンプト最適化**
   - Deep Researchプロンプト調整
   - 分析精度向上

2. **データソース拡充**
   - 新しいデータソースの発見
   - APIドキュメント調査

3. **市場調査**
   - 競合ツール分析
   - ベストプラクティス収集

---

## 🚀 次のステップ

1. **Phase 1 開始**: 基盤APIの実装から着手
2. **プロトタイプ**: 最小限の機能で動作確認
3. **フィードバック**: 実際の案件でテスト
4. **改善**: 分析精度・提案品質の向上

---

**作成日**: 2025-12-15  
**バージョン**: 1.0  
**ステータス**: 設計完了・実装待ち
