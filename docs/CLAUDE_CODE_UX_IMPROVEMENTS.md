# Claude Code 指示書: UX改善タスク

## 概要

ユーザーフィードバックに基づくUX改善タスクです。機能は実装されているが、使い方がわからない、手順が不明確、統合が不十分などの問題を解決します。

---

## 1. ストレージ設定の改善

### 問題点
- **現在**: `/dev/storage-settings` に「ローカル」「ハイブリッド」「クラウド」の3モードがあるが、UIがわかりにくい
- ユーザーは「ローカルストレージしか選べない」と感じている
- Google Drive接続の手順が不明確

### 実装要件

#### 1.1 ストレージ選択UIの改善

**現在の問題:**
- モード選択が「ローカル」「ハイブリッド」「クラウド」という技術的な用語
- Google Drive接続が必要なことがわかりにくい

**改善案:**
```
┌─ ストレージ設定 ─────────────────────────────────────┐
│                                                       │
│ データの保存先を選択:                                 │
│                                                       │
│ ┌─────────────────────────────────────────────────┐ │
│ │ ○ ローカルストレージ（推奨：個人利用）          │ │
│ │   すべてのデータをローカルのSQLiteに保存        │ │
│ │   ✅ すぐ使える、設定不要                        │ │
│ │   ❌ チーム共有不可                              │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ ┌─────────────────────────────────────────────────┐ │
│ │ ○ Google Drive（推奨：チーム利用）              │ │
│ │   クラウドに保存、チームメンバーと共有可能      │ │
│ │                                                  │ │
│ │   接続状況: [未接続]                             │ │
│ │   [Googleと接続] [接続テスト]                   │ │
│ │                                                  │ │
│ │   💡 接続すると:                                 │ │
│ │   • リサーチ結果をGoogle Sheetsに自動保存        │ │
│ │   • 画像をGoogle Driveに保存                     │ │
│ │   • チームメンバーとリアルタイム共有             │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ ┌─────────────────────────────────────────────────┐ │
│ │ ○ ハイブリッド（自動最適化）                    │ │
│ │   データ種別に応じて最適な保存先を自動選択       │ │
│ │   ⚠️ Google Drive接続が必要                     │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
└───────────────────────────────────────────────────────┘
```

#### 1.2 設定ページからの直接アクセス改善

**現在**: `/settings` から「ストレージ設定を開く」ボタンで遷移

**改善案**: 設定ページ内に直接ストレージ選択UIを表示

#### 1.2 Google Drive接続フロー

1. 「Google Drive」を選択
2. 「接続」ボタンをクリック
3. OAuth認証フロー
4. 接続テスト実行
5. 成功したら保存先として設定

---

## 2. Google Auth設定のガイド強化

### 問題点
- ガイドがないとわかりにくい
- GASテンプレートの説明が不明確（Slack、フォーム回答など）
- どのテンプレートが必要かわからない

### 実装要件

#### 2.1 ステップバイステップガイド

```
┌─ Google Workspace連携セットアップ ───────────────────┐
│                                                       │
│ ステップ 1/4: Google Cloud Console設定               │
│ ┌─────────────────────────────────────────────────┐ │
│ │ 1. Google Cloud Consoleにアクセス                │ │
│ │    [https://console.cloud.google.com]            │ │
│ │                                                  │ │
│ │ 2. プロジェクトを作成または選択                  │ │
│ │                                                  │ │
│ │ 3. 「APIとサービス」→「認証情報」                │ │
│ │                                                  │ │
│ │ 4. 「+ 認証情報を作成」→「OAuth 2.0 クライアントID」│ │
│ │                                                  │ │
│ │ 5. アプリケーションの種類: 「ウェブアプリケーション」│ │
│ │                                                  │ │
│ │ 6. 承認済みのリダイレクト URI に追加:           │ │
│ │    http://localhost:3000/api/auth/google/callback│ │
│ │                                                  │ │
│ │ 7. 「作成」をクリック                             │ │
│ │                                                  │ │
│ │ 8. クライアントIDとシークレットをコピー          │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ [次へ →]                                             │
└───────────────────────────────────────────────────────┘
```

#### 2.2 GASテンプレート説明の明確化

**現在の問題:**
- GASテンプレートの説明が不明確
- Slack、フォーム回答インポート、自動バックアップなど、どれが必要かわからない

**改善案:**

**設定ページに追加:**
```
┌─ Google Workspace連携 ──────────────────────────────┐
│                                                       │
│ Google Workspace連携を使用するには、GAS（Google Apps│
│ Script）のテンプレートをインストールする必要があります│
│                                                       │
│ ┌─ GASテンプレート ───────────────────────────────┐ │
│ │                                                  │ │
│ │ 📊 基本機能（推奨・必須）                        │ │
│ │ ┌────────────────────────────────────────────┐ │ │
│ │ │ ✅ スプレッドシート連携                    │ │ │
│ │ │                                             │ │ │
│ │ │ 機能:                                       │ │ │
│ │ │ • リサーチ結果を自動でGoogle Sheetsに保存  │ │ │
│ │ │ • フォーマット付きで見やすく表示           │ │ │
│ │ │ • チームメンバーとリアルタイム共有          │ │ │
│ │ │                                             │ │ │
│ │ │ [インストール方法を見る]                    │ │ │
│ │ └────────────────────────────────────────────┘ │ │
│ │                                                  │ │
│ │ ┌─ オプション機能 ───────────────────────────┐ │ │
│ │ │                                             │ │ │
│ │ │ □ Slack通知                                │ │ │
│ │ │   リサーチ完了時にSlackに通知               │ │ │
│ │ │   必要ですか？ [はい] [いいえ]              │ │ │
│ │ │                                             │ │ │
│ │ │ □ フォーム回答インポート                   │ │ │
│ │ │   Googleフォームの回答を自動インポート      │ │ │
│ │ │   必要ですか？ [はい] [いいえ]              │ │ │
│ │ │                                             │ │ │
│ │ │ □ 自動バックアップ                          │ │ │
│ │ │   定期的に自動バックアップを実行             │ │ │
│ │ │   （Foam/Python/Import）                    │ │ │
│ │ │   必要ですか？ [はい] [いいえ]              │ │ │
│ │ └────────────────────────────────────────────┘ │ │
│ │                                                  │ │
│ │ 💡 ヒント:                                      │ │
│ │ • 基本機能だけでも十分動作します                │ │
│ │ • Slack通知はチーム利用時に便利                 │ │
│ │ • フォーム回答インポートは必要に応じて          │ │
│ │ • 自動バックアップは多くなくてもOK              │ │
│ └───────────────────────────────────────────────────┘ │
│                                                       │
│ [GASテンプレートをダウンロード]                      │
└───────────────────────────────────────────────────────┘
```

**インストールガイド:**
```
┌─ GASテンプレート インストールガイド ────────────────┐
│                                                       │
│ ステップ 1: テンプレートをダウンロード               │
│ [ダウンロード]                                        │
│                                                       │
│ ステップ 2: Google Apps Scriptで開く                 │
│ 1. https://script.google.com にアクセス             │
│ 2. 「新規プロジェクト」をクリック                    │
│ 3. ダウンロードしたコードを貼り付け                  │
│                                                       │
│ ステップ 3: 認証情報を設定                           │
│ 1. 「プロジェクトの設定」を開く                      │
│ 2. 「スクリプト プロパティ」に以下を追加:           │
│    • GOOGLE_API_KEY: [あなたのAPIキー]              │
│                                                       │
│ ステップ 4: デプロイ                                 │
│ 1. 「デプロイ」→「新しいデプロイ」                   │
│ 2. 種類: 「ウェブアプリ」                            │
│ 3. 「デプロイ」をクリック                             │
│                                                       │
│ ステップ 5: 接続テスト                               │
│ [接続をテスト]                                       │
│                                                       │
│ ✅ 接続成功！                                         │
└───────────────────────────────────────────────────────┘
```

#### 2.3 接続テスト機能

```
┌─ 接続テスト ────────────────────────────────────────┐
│                                                       │
│ [接続をテスト]                                       │
│                                                       │
│ テスト結果:                                          │
│ ✅ Google Drive: 接続成功                            │
│ ✅ Google Sheets: 接続成功                           │
│ ✅ Google Docs: 接続成功                             │
│                                                       │
│ エラーがある場合:                                    │
│ ❌ Google Drive: 認証エラー                          │
│    解決方法: OAuth認証を再実行してください           │
└───────────────────────────────────────────────────────┘
```

---

## 3. スワイプファイル・参考LPの活用改善

### 問題点
1. スワイプ追加→LP取り込みの手順が不明確
2. 「保存したらどうなるの？」がわからない
3. AIアシスタントで参考LP原稿に対して指示できるか不明
4. プレビュー画像を参照LPのトンマナに合わせて編集できるか不明

### 実装要件

#### 3.1 スワイプファイル追加フローの明確化

```
┌─ スワイプファイル追加 ──────────────────────────────┐
│                                                       │
│ ステップ 1: ファイルを選択                           │
│ [ファイルを選択] または [ドラッグ&ドロップ]          │
│                                                       │
│ ステップ 2: メタデータ入力                           │
│ ┌─────────────────────────────────────────────────┐ │
│ │ 名前: [参考LP_エステサロン]                      │ │
│ │ カテゴリ: [エステ・美容 ▼]                       │ │
│ │ トンマナ: [高級・上品 ▼]                         │ │
│ │ メモ: [金色のグラデーション、シンプルなレイアウト]│ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ ステップ 3: 保存後の使い方                           │
│ ┌─────────────────────────────────────────────────┐ │
│ │ ✅ ワークスペースで参照LPとして表示               │ │
│ │ ✅ 画像生成時にトンマナの参考として使用           │ │
│ │ ✅ AIアシスタントで「このLPのトンマナで」と指示  │ │
│ │ ✅ マジックペンで「このLPに合わせて」と編集      │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ [保存] [キャンセル]                                  │
└───────────────────────────────────────────────────────┘
```

#### 3.2 ワークスペースでの参考LP表示強化

**現在の問題:**
- 参考LPパネルに表示されているが、どう使うかわからない

**改善案:**
```
┌─ 参考LPパネル ──────────────────────────────────────┐
│                                                       │
│ 📁 参考LP (3件)                                       │
│                                                       │
│ ┌─────────────────────────────────────────────────┐ │
│ │ [画像] エステサロンLP                           │ │
│ │ トンマナ: 高級・上品                            │ │
│ │                                                  │ │
│ │ [このLPを参考に画像生成]                         │ │
│ │ [このLPのトンマナで編集]                         │ │
│ │ [詳細を見る]                                    │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ [+ スワイプファイルを追加]                           │
└───────────────────────────────────────────────────────┘
```

#### 3.3 AIアシスタントでの参考LP活用

**現在の問題:**
- ワークスペースのAIチャットで参考LPを指定できない
- 「このLPのトンマナで」という指示ができない

**実装要件:**

**UI改善:**
```
┌─ AIアシスタント ────────────────────────────────────┐
│                                                       │
│ ┌─ 参考LP選択 ────────────────────────────────────┐ │
│ │ 参考LPを指定（オプション）:                      │ │
│ │ [エステサロンLP ▼]                              │ │
│ │                                                  │ │
│ │ 💡 指定すると、このLPのトンマナで生成します      │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ [メッセージ入力欄]                                   │
│ 「このLPのトンマナで、ファーストビューを生成して」  │
│                                                       │
│ [送信]                                                │
└───────────────────────────────────────────────────────┘
```

**実装:**
```typescript
// ワークスペースページに追加
const [selectedReferenceLP, setSelectedReferenceLP] = useState<string | null>(null);

// チャット送信時に参考LPを考慮
const handleChatSubmit = async () => {
  // ... 既存のコード ...
  
  if (wantsImage && selectedReferenceLP) {
    // 参考LPの画像を取得
    const refSwipe = swipeFiles.find(sf => sf.id === selectedReferenceLP);
    if (refSwipe) {
      // プロンプトに参考LP情報を追加
      const enhancedPrompt = `
${promptText}

【参考LPのトンマナに合わせて生成してください】
参考LP: ${refSwipe.name}
      `;
      
      // 画像生成APIに参照画像IDを渡す
      const res = await fetch("/api/generate/manga", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          prompt: enhancedPrompt,
          style: detectedStyle,
          aspectRatio: detectedAspect,
          colorMode: genOptions.colorMode,
          refSwipeIds: [selectedReferenceLP], // 参照画像IDを追加
        }),
      });
      // ...
    }
  }
};
```

**API改善:**
```typescript
// /api/generate/manga または /api/projects/[id]/assets/generate-image
// refSwipeIds を受け取り、参照画像として使用

if (refSwipeIds && refSwipeIds.length > 0) {
  // スワイプファイルから画像を取得
  const refImages = await Promise.all(
    refSwipeIds.map(async (id) => {
      const swipe = await getSwipeFile(id);
      const imageBuffer = await fs.readFile(swipe.file_path);
      return {
        mimeType: swipe.mime_type || "image/png",
        data: imageBuffer.toString("base64"),
      };
    })
  );
  
  // Gemini APIに参照画像を含めて送信
  contentParts.push(...refImages.map(img => ({
    inlineData: {
      mimeType: img.mimeType,
      data: img.data,
    },
  })));
}
```

#### 3.4 マジックペンでのトンマナ合わせ編集

**現在の問題:**
- マジックペン編集時に参考LPを指定できない
- トンマナに合わせた編集ができない

**UI改善:**
```
┌─ マジックペン編集 ──────────────────────────────────┐
│                                                       │
│ 編集指示:                                             │
│ [この部分を青いボタンに変更]                         │
│                                                       │
│ ┌─ トンマナ設定 ──────────────────────────────────┐ │
│ │ 参考LPのトンマナに合わせる:                      │ │
│ │ [エステサロンLP ▼]                              │ │
│ │                                                  │ │
│ │ 💡 選択すると、このLPの色・フォント・スタイルに │ │
│ │    合わせて編集されます                          │ │
│ │                                                  │ │
│ │ または手動設定:                                  │ │
│ │ カラー: [高級・上品 ▼]                          │ │
│ │ フォント: [シンプル・上品 ▼]                    │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ [生成]                                                │
└───────────────────────────────────────────────────────┘
```

**実装:**
```typescript
// MagicPenEditor.tsx に追加
const [selectedReferenceLP, setSelectedReferenceLP] = useState<string | null>(null);

const handleGenerate = async () => {
  let enhancedPrompt = prompt;
  
  // 参考LPが選択されている場合
  if (selectedReferenceLP) {
    const refSwipe = swipeFiles.find(sf => sf.id === selectedReferenceLP);
    if (refSwipe) {
      enhancedPrompt = `
${prompt}

【参考LPのトンマナに合わせて編集してください】
参考LP: ${refSwipe.name}
色、フォント、スタイルを参考LPに合わせてください。
      `;
      
      // 参照画像IDを追加
      setSelectedRefIds([selectedReferenceLP]);
    }
  }
  
  // 既存の生成処理...
};
```

---

## 4. GASアプリ化・ダッシュボード化

### 問題点
- 制作物を管理・チーム共有できる機能が不明確
- スプレッドシートの強みが活かされていない

### 実装要件

#### 4.1 ダッシュボードUI

```
┌─ LP制作ダッシュボード ──────────────────────────────┐
│                                                       │
│ 📊 プロジェクト一覧                                   │
│                                                       │
│ ┌─────────────────────────────────────────────────┐ │
│ │ プロジェクト名 | ステータス | 最終更新 | 共有   │ │
│ ├─────────────────────────────────────────────────┤ │
│ │ エステサロンLP | 制作中    | 2時間前 | 👥 3人 │ │
│ │ 健康食品LP     | 完了      | 1日前   | 👥 1人 │ │
│ │ セミナーLP     | レビュー中| 3時間前 | 👥 5人 │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ 📈 制作進捗                                          │
│ ┌─────────────────────────────────────────────────┐ │
│ │ [プログレスバー]                                │ │
│ │ 構成作成 ✅ → プロンプト ✅ → 画像生成 🔄      │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ 👥 チームメンバー                                     │
│ ┌─────────────────────────────────────────────────┐ │
│ │ 👤 田中太郎 (オーナー)                          │ │
│ │ 👤 佐藤花子 (デザイナー)                        │ │
│ │ 👤 鈴木一郎 (コピーライター)                    │ │
│ │                                                  │ │
│ │ [+ メンバーを追加]                              │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ 📝 コメント・フィードバック                          │
│ ┌─────────────────────────────────────────────────┐ │
│ │ 田中太郎: 「ファーストビューの色を調整してください」│ │
│ │ 佐藤花子: 「了解しました。修正します。」        │ │
│ └─────────────────────────────────────────────────┘ │
└───────────────────────────────────────────────────────┘
```

#### 4.2 スプレッドシート連携強化

**自動保存される情報:**
- プロジェクト一覧
- セクション構成
- 生成された画像のURL
- プロンプト履歴
- コメント・フィードバック

**フォーマット:**
- ヘッダー行に色付け
- 列幅の自動調整
- 画像URLをクリック可能なリンクに
- ステータスに色分け（制作中=黄色、完了=緑）

---

## 5. LP取り込みワークフローの明確化

### 問題点
- 「新しいLP取り込み」の手順が不明確
- 原稿を入れて保存したらどうなるかわからない
- `/projects/[id]/scraper` ページの使い方がわからない

### 実装要件

#### 5.1 LP取り込みページの改善

**現在の問題:**
- `/projects/[id]/scraper` にURL入力欄があるが、手順が不明確
- スクレイピング後の「保存」ボタンがない
- 「保存したらどうなるの？」がわからない

**改善案:**
```
┌─ LP取り込み ───────────────────────────────────────┐
│                                                       │
│ 📥 LPを取り込む                                       │
│                                                       │
│ ┌─ ステップ 1: LPのURLを入力 ─────────────────────┐ │
│ │                                                  │ │
│ │ LPのURL: [https://example.com/lp]               │ │
│ │                                                  │ │
│ │ [取り込む]                                       │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ ┌─ ステップ 2: 確認・編集（取り込み後） ───────────┐ │
│ │                                                  │ │
│ │ ✅ 取り込み完了！                                │ │
│ │                                                  │ │
│ │ セクション数: 5                                  │ │
│ │ 原稿: [プレビュー] [編集]                        │ │
│ │                                                  │ │
│ │ [セクションを選択してインポート]                 │ │
│ │ [全てインポート]                                 │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ ┌─ 保存後の使い方 ─────────────────────────────────┐ │
│ │                                                  │ │
│ │ 💡 保存すると:                                   │ │
│ │ • ワークスペースの「参照LP」タブに表示されます   │ │
│ │ • AIアシスタントで「このLPのトンマナで」と指示可能│ │
│ │ • マジックペンで「このLPに合わせて」と編集可能   │ │
│ │ • スワイプファイルとして保存されます             │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ [保存してワークスペースに戻る]                      │
└───────────────────────────────────────────────────────┘
```

#### 5.2 原稿保存機能の明確化

**現在の問題:**
- ワークスペースの「原稿」タブに原稿を入力できるが、保存後の使い方がわからない

**改善案:**
```
┌─ 原稿タブ ──────────────────────────────────────────┐
│                                                       │
│ 📝 LP原稿                                            │
│                                                       │
│ [原稿入力欄]                                          │
│                                                       │
│ ┌─ 保存後の使い方 ─────────────────────────────────┐ │
│ │                                                  │ │
│ │ 💡 原稿を保存すると:                             │ │
│ │ • AIアシスタントで「この原稿で画像生成」と指示可能│ │
│ │ • 「AIで分割」でセクションごとに自動分割         │ │
│ │ • 構成作成時に原稿を参考にできます               │ │
│ │                                                  │ │
│ │ 例: 「この原稿のファーストビューを生成して」     │ │
│ └─────────────────────────────────────────────────┘ │
│                                                       │
│ [保存] [AIで分割]                                    │
└───────────────────────────────────────────────────────┘
```

---

## 6. 全体的なUX改善

### 問題点
- 機能が複雑でわかりにくい
- 手順が不明確
- 「これで何ができるの？」がわからない

### 実装要件

#### 6.1 オンボーディング改善

**初回起動時:**
```
┌─ ようこそ！LP Builder Pro ──────────────────────────┐
│                                                       │
│ 3ステップでLP制作を始めましょう                       │
│                                                       │
│ ステップ 1: プロジェクトを作成                       │
│ [プロジェクト作成]                                   │
│                                                       │
│ ステップ 2: 構成を作成                               │
│ テンプレートから選ぶか、AIで自動生成                 │
│                                                       │
│ ステップ 3: 画像を生成                               │
│ プロンプトから画像を生成                             │
│                                                       │
│ [スキップ] [次へ →]                                  │
└───────────────────────────────────────────────────────┘
```

#### 6.2 ツールチップ・ヘルプの追加

各機能に「？」アイコンを追加し、クリックで説明を表示：

```
┌─ スワイプファイルとは？ ────────────────────────────┐
│                                                       │
│ スワイプファイルは、参考にしたいLPやデザインを       │
│ 保存しておく機能です。                                │
│                                                       │
│ 使い方:                                               │
│ 1. LPを取り込んで保存                                │
│ 2. 画像生成時に「このLPのトンマナで」と指示          │
│ 3. マジックペンで「このLPに合わせて」と編集         │
│                                                       │
│ [閉じる]                                              │
└───────────────────────────────────────────────────────┘
```

#### 6.3 クイックスタートガイド

各ページに「クイックスタート」ボタンを追加：

```
┌─ クイックスタート ──────────────────────────────────┐
│                                                       │
│ このページでできること:                               │
│                                                       │
│ 1. 構成を作成                                        │
│    テンプレートから選ぶか、AIで自動生成              │
│                                                       │
│ 2. セクションを追加                                   │
│    [+ セクション追加] をクリック                     │
│                                                       │
│ 3. プロンプト生成へ進む                               │
│    [プロンプト生成へ →] をクリック                   │
│                                                       │
│ [閉じる]                                              │
└───────────────────────────────────────────────────────┘
```

---

## 実装優先順位

### Phase 1: 緊急（UXの根本的問題）
1. [ ] **ストレージ選択UIの改善**
   - `/settings` ページに直接ストレージ選択UIを表示
   - 「ローカル」「Google Drive」「ハイブリッド」を明確に説明
   - Google Drive接続が必要なことを明示

2. [ ] **Google Auth設定ガイド（ステップバイステップ）**
   - `/dev/storage-settings` に詳細ガイドを追加
   - スクリーンショット付きの手順説明
   - 接続テスト機能の実装

3. [ ] **GASテンプレート説明の明確化**
   - どのテンプレートが必要か明確に説明
   - Slack、フォーム回答、自動バックアップの必要性を説明
   - インストールガイドの追加

### Phase 2: 重要（機能の活用）
4. [ ] **スワイプファイル追加フローの明確化**
   - 「保存したらどうなるの？」を明示
   - 保存後の使い方を表示

5. [ ] **ワークスペースでの参考LP表示強化**
   - 参考LPパネルに「このLPを参考に画像生成」ボタンを追加
   - 「このLPのトンマナで編集」ボタンを追加

6. [ ] **AIアシスタントでの参考LP活用**
   - チャット入力欄の上に「参考LP選択」を追加
   - 選択したLPのトンマナで画像生成できるようにする
   - `/api/generate/manga` に `refSwipeIds` を渡す

7. [ ] **マジックペンでのトンマナ合わせ編集**
   - MagicPenEditorに「参考LP選択」を追加
   - 選択したLPのトンマナで編集できるようにする

### Phase 3: 改善（使いやすさ）
8. [ ] **LP取り込みページの改善**
   - `/projects/[id]/scraper` に「保存後の使い方」を表示
   - ウィザード形式で手順を明確化

9. [ ] **原稿保存機能の明確化**
   - ワークスペースの「原稿」タブに「保存後の使い方」を表示
   - AIアシスタントでの活用方法を説明

10. [ ] **GASダッシュボードUI**
    - 制作物を管理・チーム共有できるダッシュボード
    - スプレッドシートの強みを活かしたUI

11. [ ] **スプレッドシート連携強化**
    - フォーマット付きで出力
    - ヘッダー行に色付け、列幅自動調整

12. [ ] **オンボーディング改善**
    - 初回起動時のガイド
    - 各ページに「クイックスタート」ボタン

13. [ ] **ツールチップ・ヘルプ追加**
    - 各機能に「？」アイコンを追加
    - クリックで説明を表示

---

## 完了条件

### Phase 1（緊急）
1. [ ] `/settings` ページでストレージ選択が明確に表示される
2. [ ] Google Drive接続の手順がステップバイステップで表示される
3. [ ] GASテンプレートの説明が明確（Slack、フォーム回答、自動バックアップの必要性）
4. [ ] 接続テストが動作し、結果が表示される

### Phase 2（重要）
5. [ ] スワイプファイル追加時に「保存後の使い方」が表示される
6. [ ] ワークスペースの参考LPパネルに「このLPを参考に画像生成」ボタンがある
7. [ ] AIアシスタントで参考LPを選択して画像生成できる
8. [ ] マジックペンで参考LPを選択してトンマナ合わせ編集ができる
9. [ ] LP取り込みページに「保存後の使い方」が表示される
10. [ ] 原稿保存時に「保存後の使い方」が表示される

### Phase 3（改善）
11. [ ] GASダッシュボードUIが実装されている
12. [ ] スプレッドシート連携がフォーマット付きで動作する
13. [ ] オンボーディングガイドが表示される
14. [ ] 各機能にツールチップ・ヘルプが追加されている

---

## 実装時の注意事項

1. **既存機能を壊さない**: 既存の機能は維持しつつ、UXを改善する
2. **段階的な改善**: Phase 1から順番に実装し、動作確認しながら進める
3. **ユーザーテスト**: 各Phase完了後にユーザーに確認してもらう
4. **エラーハンドリング**: 接続失敗時など、エラーメッセージを明確に表示
5. **パフォーマンス**: UI改善によりパフォーマンスが低下しないように注意

---

## Claude Codeへの実装指示

### 実装の進め方

1. **Phase 1から順番に実装**
   - Phase 1は緊急度が高いので最優先
   - 各Phase完了後に動作確認

2. **既存機能を壊さない**
   - 既存の機能は維持
   - 新しいUIを追加する形で改善

3. **ユーザーフィードバックを反映**
   - 「これで何ができるの？」を常に明示
   - 「保存したらどうなるの？」を説明
   - 手順を明確にする

### 実装時の注意点

- **ストレージ設定**: `/dev/storage-settings` のUIを改善し、`/settings` からも直接アクセスできるように
- **参考LP活用**: 既存の `refSwipeIds` パラメータを活用（`/api/projects/[id]/assets/generate-image` で既に実装済み）
- **AIアシスタント**: ワークスペースのチャットに参考LP選択UIを追加
- **マジックペン**: MagicPenEditorに参考LP選択を追加

### ファイル構成

```
src/
├── app/
│   ├── settings/
│   │   └── page.tsx                    # ストレージ選択UI追加
│   └── dev/
│       └── storage-settings/
│           └── page.tsx                # Google Authガイド追加
├── components/
│   ├── workspace/
│   │   ├── ReferenceLPSelector.tsx     # NEW: 参考LP選択UI
│   │   └── UsageGuide.tsx              # NEW: 使い方ガイド
│   └── prompts/
│       └── PromptBuilder.tsx           # 参考LP選択追加
├── lib/
│   └── workspace/
│       └── reference-lp-utils.ts       # NEW: 参考LP活用ユーティリティ
```

---

**バージョン**: 1.0
**ステータス**: 実装待ち
**優先度**: 高（UX改善は緊急）
**最終更新**: 2024年12月18日
