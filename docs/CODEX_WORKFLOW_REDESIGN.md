# Codex タスク: リサーチワークフロー再設計

## 背景・現状の問題

### ユーザーフィードバック（要約）

1. **悩み収集の価値が不明確**
   - Infotopで取得した競合LPのコピーが「ありきたり」で、実際の悩みとずれている
   - 例: 手相占いのリサーチで、潜在意識系の競合が出てきて関連性が薄い
   - 「売れる単語・言い回し」の抽出は価値があるが、悩み収集自体の必要性は疑問

2. **分類ステップの問題**
   - サンプル数が少ない中での分類は統計学的に無意味
   - 大量のデータを集めてから分類すべき

3. **ワークフローの順序問題**
   - キーワード分析・Deep Researchは最初に実行すべき
   - 「大量のデータをかき集める」ことが最優先

4. **価値のある機能**
   - 売れるコピー・単語の抽出
   - パワーワードの発見
   - LP構成パターンの分析

### 現在のワークフロー（問題あり）

```
1. Infotop競合分析
2. 悩み収集（Yahoo知恵袋 + Amazon書籍）
3. 悩み分類
4. キーワード分析
5. Deep Research
6. コンセプト生成
```

## Codexへのタスク

### 1. 新ワークフローの設計

以下の原則に基づいて再設計してください：

#### 原則
- **データ量優先**: 最初に大量のデータを収集
- **価値フォーカス**: 売れる単語・コピー抽出に注力
- **効率化**: 無駄なステップを削除または統合
- **並列処理**: 独立したタスクは並列実行

#### 提案すべき新ワークフロー案

**案A: Deep Research ファースト**
```
1. Deep Research（市場概要、トレンド、大まかな悩みを把握）
2. キーワード大量収集（ラッコキーワード、サジェスト等）
3. Infotop + 競合LP分析（売れる単語・パターン抽出）
4. コンセプト生成
```

**案B: 並列収集 → 統合分析**
```
並列フェーズ:
  - Deep Research
  - キーワード収集
  - Infotop競合分析
↓
統合分析フェーズ:
  - パワーワード抽出
  - パターン分析
  - コンセプト生成
```

**案C: ユーザー選択式**
```
簡易モード: Deep Research → コンセプト生成（5分）
標準モード: Deep Research → キーワード → Infotop → コンセプト（15分）
詳細モード: 全ステップ並列 → 統合分析 → コンセプト（30分）
```

### 2. 各ステップの再定義

#### 2.1 Deep Research（強化）
- **目的**: 市場の全体像、トレンド、一般的な悩みを把握
- **データソース**: Google検索（Grounding）
- **出力**: 
  - 市場概要
  - ターゲット像
  - 一般的な悩み・課題
  - トレンドキーワード
  - 競合の方向性

#### 2.2 キーワード大量収集（新規）
- **目的**: 検索ニーズから売れるワードを発見
- **データソース**: 
  - ラッコキーワード API（サジェスト）
  - Google Trends API
  - 関連検索キーワード
- **出力**:
  - キーワードリスト（1000件以上目標）
  - 検索ボリューム
  - 競合性
  - 季節性

#### 2.3 Infotop競合分析（リフォーカス）
- **目的**: 売れているLPのコピーパターンを抽出
- **フォーカス変更**: 
  - ✗ 悩みの収集（削除）
  - ◯ パワーワード抽出
  - ◯ LP構成パターン分析
  - ◯ ヘッドライン分析
  - ◯ CTA表現分析
- **出力**:
  - 売れる単語・フレーズ Top50
  - LP構成テンプレート
  - 効果的なヘッドラインパターン
  - CTAフレーズ集

#### 2.4 悩み収集の統合または削除
- **選択肢A**: Deep Researchに統合（LLMが市場調査から悩みを抽出）
- **選択肢B**: オプション化（詳細モードのみ有効）
- **選択肢C**: 削除（Infotopコピーから悩みを逆推定）

### 3. データ統合設計

```typescript
interface ResearchOutput {
  // Deep Research結果
  marketOverview: {
    summary: string;
    trends: string[];
    targetPersona: string;
    generalPains: string[];
  };
  
  // キーワード結果
  keywords: {
    total: number;
    topKeywords: Array<{
      word: string;
      volume: number;
      difficulty: number;
    }>;
    longTailKeywords: string[];
  };
  
  // Infotop分析結果（リフォーカス）
  copyAnalysis: {
    powerWords: string[];        // 売れる単語
    headlines: string[];         // 効果的なヘッドライン
    ctaPhrases: string[];        // CTA表現
    lpPatterns: LPPattern[];     // LP構成パターン
  };
  
  // 統合コンセプト
  concepts: ConceptCandidate[];
}
```

### 4. UIフローの再設計

```
[入力フォーム] ← 最小限の入力
  ↓
[モード選択] 簡易 / 標準 / 詳細
  ↓
[リサーチ実行] ← リアルタイム進捗表示
  ↓
[結果タブ表示]
  - 市場概要（Deep Research）
  - キーワード一覧
  - コピー分析（パワーワード、パターン）
  - コンセプト候補
```

### 5. 期待する出力

1. **新ワークフロー設計書**
   - 推奨ワークフロー（3案から選択）
   - 各ステップの詳細仕様
   - データフロー図

2. **ステップ優先順位**
   - 実装順序
   - 各ステップの工数見積もり

3. **削除または統合するステップの根拠**
   - なぜ悩み収集を削除/統合するか
   - なぜ分類ステップを削除するか

4. **Claude Codeへの実装指示**
   - 各ステップの実装仕様
   - API設計
   - 型定義

## 参考情報

### ユーザーが言及した価値ポイント
- 「売れる単語・言い回しの抽出」
- 「パワーワードの発見」
- 「大量のデータをかき集める」
- 「Deep Researchを最初に」

### 現在の問題点
- Infotopスクレイピングが不安定
- サンプル数が少ないと分類が無意味
- ワークフローの順序が非効率

---

**注意**: この設計はClaude Codeが実装するための仕様書となります。ユーザーの要望を最優先に、実装可能で価値のある設計を提供してください。
